# rippled.cfg - XRPL Full-History Node Configuration
# Lucendex Data Services - Full-History Node
# Optimized for: Complete ledger history, indexer feed via WebSocket
# Resources: Shares 6 vCPU / 16GB RAM / 320GB SSD

[server]
port_rpc
port_ws_public
port_peer

[fetch_depth]
full

[port_rpc]
port = 51237
ip = 127.0.0.1
admin = 127.0.0.1
protocol = http

[port_ws_public]
port = 6006
ip = 127.0.0.1
admin = 127.0.0.1
protocol = ws

[port_peer]
port = 51236
ip = 0.0.0.0
protocol = peer

#-------------------------------------------------------------------------------

[node_size]
# huge required for full-history sync (32GB+ RAM)
# medium was causing OOM kills during sync
huge

[ledger_history]
# Start with recent history (256000 ledgers â‰ˆ 30 days)
# Reduce memory pressure during initial sync
# Can increase to 'full' after stable sync
256000

#-------------------------------------------------------------------------------

[node_db]
type=NuDB
path=/var/lib/rippled/db/nudb
advisory_delete=0
# Start from recent ledger to avoid memory-intensive full sync
# Indexer only needs recent history for operations
earliest_seq=80000000
# online_delete disabled to preserve history

[database_path]
/var/lib/rippled/db

[debug_logfile]
/var/log/rippled/debug.log

[sntp_servers]
time.windows.com
time.apple.com
time.nist.gov
pool.ntp.org

#-------------------------------------------------------------------------------

[validator_list_sites]
https://vl.ripple.com
https://unl.xrplf.org

[validator_list_keys]
# XRPL Foundation (primary)
ED42AEC58B701EEBB77356FFFEC26F83C1F0407263530F068C7C73D392C7E06FD1
# Ripple (legacy)
ED2677ABFFD1B33AC6FBC3062B71F1E8397C1505E1C42C64D11AD1B28FF73F4734

#-------------------------------------------------------------------------------

[rpc_startup]
{ "command": "log_level", "severity": "info" }

[ssl_verify]
1

[ssl_verify_file]
/etc/ssl/certs/ca-certificates.crt

[ssl_verify_dir]
/etc/ssl/certs

#-------------------------------------------------------------------------------

# Performance tuning for history storage (8 dedicated cores on 16-core VM)
[io_workers]
4

[prefetch_workers]
2

[workers]
6

#-------------------------------------------------------------------------------

# Log rotation
[log_level]
info

[log_rotation]
10

[log_file_max]
100MB

#-------------------------------------------------------------------------------

# Network settings
[overlay]
public_ip_detect = 1

[peer_private]
0

#-------------------------------------------------------------------------------

# Storage optimization (disabled for full-history)
# online_delete not used - we keep everything
# advisory_delete = 0

# Compression
[compression]
true

#-------------------------------------------------------------------------------

# Path finding (not critical for history node)
[path_search]
5

[path_search_fast]
2

[path_search_max]
8

#-------------------------------------------------------------------------------

# Fee voting (default values)
[voting]
reference_fee = 10
account_reserve = 10000000
owner_reserve = 2000000

#-------------------------------------------------------------------------------

# Performance monitoring
[insight]
server = 0
ledger = 0
manifest = 0
